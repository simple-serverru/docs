---
–ê–≤—Ç–æ—Ä: –ö–æ–º–∞–Ω–¥–∞ simple-server.ru
---

# –°–æ–∑–¥–∞–Ω–∏–µ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –¥–æ–º–µ–Ω–∞ –ø—Ä–∏ –ø–æ–º–æ—â–∏ BIND9

## –í–≤–µ–¥–µ–Ω–∏–µ

**BIND9** (Berkeley Internet Name Domain) ‚Äî —ç—Ç–æ –æ–¥–∏–Ω –∏–∑ —Å–∞–º—ã—Ö –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö DNS-—Å–µ—Ä–≤–µ—Ä–æ–≤, –∫–æ—Ç–æ—Ä—ã–π –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–æ–º–µ–Ω–Ω—ã–º–∏ –∏–º–µ–Ω–∞–º–∏. –° –µ–≥–æ –ø–æ–º–æ—â—å—é –º–æ–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å –ª–æ–∫–∞–ª—å–Ω—ã–π –¥–æ–º–µ–Ω –≤ –∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω–æ–π —Å–µ—Ç–∏ –∏–ª–∏ –ª–æ–∫–∞–ª—å–Ω–æ–π —Å—Ä–µ–¥–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏.

–í –¥–∞–Ω–Ω–æ–π —Å—Ç–∞—Ç—å–µ —Ä–∞—Å—Å–º–æ—Ç—Ä–∏–º –ø—Ä–æ—Ü–µ—Å—Å —É—Å—Ç–∞–Ω–æ–≤–∫–∏, –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∏ –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ä–∞–±–æ—Ç—ã BIND9 –Ω–∞ Ubuntu.

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞ BIND9

–ü–µ—Ä–µ–¥ –Ω–∞—á–∞–ª–æ–º —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –æ–±–Ω–æ–≤–∏–º —Å–∏—Å—Ç–µ–º—É:

```bash
sudo apt update && sudo apt upgrade -y
```

–£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º BIND9 –∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –ø–∞–∫–µ—Ç—ã:

```bash
sudo apt install bind9 bind9-utils bind9-dnsutils -y
```

–ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞—Ç—É—Å —Å–ª—É–∂–±—ã:

```bash
sudo systemctl status bind9
```

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –¥–æ–º–µ–Ω–∞

### 1. –°–æ–∑–¥–∞–Ω–∏–µ –∑–æ–Ω—ã –ø—Ä—è–º–æ–≥–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞

–§–∞–π–ª –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –∑–æ–Ω –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ `/etc/bind/named.conf.local`. –û—Ç–∫—Ä—ã–≤–∞–µ–º –µ–≥–æ:

```bash
sudo nano /etc/bind/named.conf.local
```

–î–æ–±–∞–≤–ª—è–µ–º –∑–æ–Ω—É –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –¥–æ–º–µ–Ω–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `example.local`):

```ini
zone "example.local" {
    type master;
    file "/etc/bind/db.example.local";
};
```

### 2. –°–æ–∑–¥–∞–Ω–∏–µ —Ñ–∞–π–ª–∞ –∑–æ–Ω—ã

–ö–æ–ø–∏—Ä—É–µ–º —à–∞–±–ª–æ–Ω –∑–æ–Ω—ã:

```bash
sudo cp /etc/bind/db.local /etc/bind/db.example.local
```

–†–µ–¥–∞–∫—Ç–∏—Ä—É–µ–º —Ñ–∞–π–ª –∑–æ–Ω—ã:

```bash
sudo nano /etc/bind/db.example.local
```

–ü—Ä–∏–º–µ—Ä —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ —Ñ–∞–π–ª–∞:

```ini
$TTL 604800
@   IN  SOA ns1.example.local. admin.example.local. (
        2024011601 ; Serial
        604800     ; Refresh
        86400      ; Retry
        2419200    ; Expire
        604800 )   ; Negative Cache TTL
;
@   IN  NS  ns1.example.local.
ns1 IN  A   192.168.1.1
www IN  A   192.168.1.2
```

### –†–∞–∑–±–æ—Ä –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –∑–æ–Ω—ã –ø—Ä—è–º–æ–≥–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞

- **$TTL 604800** ‚Äî –í—Ä–µ–º—è –∂–∏–∑–Ω–∏ –∑–∞–ø–∏—Å–µ–π –≤ —Å–µ–∫—É–Ω–¥–∞—Ö (604800 —Å–µ–∫—É–Ω–¥ = 7 –¥–Ω–µ–π).
- **SOA (Start of Authority)** ‚Äî –ù–∞—á–∞–ª–æ –∑–æ–Ω—ã, —É–∫–∞–∑—ã–≤–∞–µ—Ç –æ—Å–Ω–æ–≤–Ω–æ–π —Å–µ—Ä–≤–µ—Ä –∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ –∑–æ–Ω—ã.
- **Serial** ‚Äî –í–µ—Ä—Å–∏—è —Ñ–∞–π–ª–∞ –∑–æ–Ω—ã, –∫–æ—Ç–æ—Ä—É—é –Ω—É–∂–Ω–æ —É–≤–µ–ª–∏—á–∏–≤–∞—Ç—å –ø—Ä–∏ –∫–∞–∂–¥–æ–º –∏–∑–º–µ–Ω–µ–Ω–∏–∏.
- **Refresh** ‚Äî –ö–∞–∫ —á–∞—Å—Ç–æ –≤—Ç–æ—Ä–∏—á–Ω—ã–µ DNS-—Å–µ—Ä–≤–µ—Ä—ã –¥–æ–ª–∂–Ω—ã –ø—Ä–æ–≤–µ—Ä—è—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è.
- **Retry** ‚Äî –ò–Ω—Ç–µ—Ä–≤–∞–ª –ø–æ–≤—Ç–æ—Ä–Ω–æ–π –ø–æ–ø—ã—Ç–∫–∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –≤ —Å–ª—É—á–∞–µ –Ω–µ—É–¥–∞—á–∏.
- **Expire** ‚Äî –í—Ä–µ–º—è, –ø–æ—Å–ª–µ –∫–æ—Ç–æ—Ä–æ–≥–æ –≤—Ç–æ—Ä–∏—á–Ω—ã–π —Å–µ—Ä–≤–µ—Ä –ø–µ—Ä–µ—Å—Ç–∞–Ω–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –∑–æ–Ω—ã.
- **Negative Cache TTL** ‚Äî –í—Ä–µ–º—è –∂–∏–∑–Ω–∏ –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç–∞ (–µ—Å–ª–∏ –∑–∞–ø–∏—Å—å –Ω–µ –Ω–∞–π–¥–µ–Ω–∞).
- **NS (Name Server)** ‚Äî –û—Å–Ω–æ–≤–Ω–æ–π —Å–µ—Ä–≤–µ—Ä, –æ–±—Å–ª—É–∂–∏–≤–∞—é—â–∏–π —ç—Ç—É –∑–æ–Ω—É.
- **A-–∑–∞–ø–∏—Å–∏** ‚Äî –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –¥–æ–º–µ–Ω–Ω—ã—Ö –∏–º–µ–Ω –≤ IP-–∞–¥—Ä–µ—Å–∞.

### 3. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∑–æ–Ω—ã –æ–±—Ä–∞—Ç–Ω–æ–≥–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞

–î–æ–±–∞–≤–ª—è–µ–º –∑–æ–Ω—É –æ–±—Ä–∞—Ç–Ω–æ–≥–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –≤ `/etc/bind/named.conf.local`:

```ini
zone "1.168.192.in-addr.arpa" {
    type master;
    file "/etc/bind/db.192";
};
```

–°–æ–∑–¥–∞—ë–º —Ñ–∞–π–ª –æ–±—Ä–∞—Ç–Ω–æ–π –∑–æ–Ω—ã:

```bash
sudo cp /etc/bind/db.127 /etc/bind/db.192
```

–†–µ–¥–∞–∫—Ç–∏—Ä—É–µ–º —Ñ–∞–π–ª `/etc/bind/db.192`:

```ini
$TTL 604800
@   IN  SOA ns1.example.local. admin.example.local. (
        2024011601 ; Serial
        604800     ; Refresh
        86400      ; Retry
        2419200    ; Expire
        604800 )   ; Negative Cache TTL
;
@   IN  NS  ns1.example.local.
1   IN  PTR ns1.example.local.
2   IN  PTR www.example.local.
```

### –†–∞–∑–±–æ—Ä –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –∑–æ–Ω—ã –æ–±—Ä–∞—Ç–Ω–æ–≥–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞

- **PTR-–∑–∞–ø–∏—Å–∏** ‚Äî –û–±—Ä–∞—Ç–Ω–æ–µ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ IP-–∞–¥—Ä–µ—Å–æ–≤ –≤ –¥–æ–º–µ–Ω–Ω—ã–µ –∏–º–µ–Ω–∞.
- **NS-–∑–∞–ø–∏—Å—å** ‚Äî –£–∫–∞–∑—ã–≤–∞–µ—Ç —Å–µ—Ä–≤–µ—Ä, –∫–æ—Ç–æ—Ä—ã–π –æ–±—Å–ª—É–∂–∏–≤–∞–µ—Ç –¥–∞–Ω–Ω—É—é –æ–±—Ä–∞—Ç–Ω—É—é –∑–æ–Ω—É.
- **SOA –∏ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã** ‚Äî –ò–¥–µ–Ω—Ç–∏—á–Ω—ã –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º –ø—Ä—è–º–æ–π –∑–æ–Ω—ã.

### 4. –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ BIND9

–ü—Ä–æ–≤–µ—Ä—è–µ–º —Ñ–∞–π–ª—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏:

```bash
sudo named-checkconf
sudo named-checkzone example.local /etc/bind/db.example.local
sudo named-checkzone 1.168.192.in-addr.arpa /etc/bind/db.192
```

–ï—Å–ª–∏ –æ—à–∏–±–æ–∫ –Ω–µ—Ç, –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ–º —Å–ª—É–∂–±—É:

```bash
sudo systemctl restart bind9
```

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–ª–∏–µ–Ω—Ç–∞

–ù–∞ –∫–ª–∏–µ–Ω—Ç—Å–∫–∏—Ö –º–∞—à–∏–Ω–∞—Ö –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –ø—Ä–æ–ø–∏—Å–∞—Ç—å IP-–∞–¥—Ä–µ—Å —Å–µ—Ä–≤–µ—Ä–∞ BIND9 –≤ —Ñ–∞–π–ª–µ `/etc/resolv.conf`:

```ini
nameserver 192.168.1.1
search example.local
```

## –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã DNS

–ü—Ä–æ–≤–µ—Ä—è–µ–º —Ä–µ–∑–æ–ª–≤–∏–Ω–≥ –¥–æ–º–µ–Ω–æ–≤:

```bash
dig @192.168.1.1 example.local
```

–ü—Ä–æ–≤–µ—Ä—è–µ–º –æ–±—Ä–∞—Ç–Ω–æ–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ:

```bash
dig -x 192.168.1.2 @192.168.1.1
```

–ï—Å–ª–∏ –æ—Ç–≤–µ—Ç—ã —Å–æ–¥–µ—Ä–∂–∞—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –∑–∞–ø–∏—Å–∏, –∑–Ω–∞—á–∏—Ç, –ª–æ–∫–∞–ª—å–Ω—ã–π –¥–æ–º–µ–Ω —Ä–∞–±–æ—Ç–∞–µ—Ç.

## –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

BIND9 ‚Äî –º–æ—â–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è DNS-–∑–∞–ø–∏—Å—è–º–∏. –° –µ–≥–æ –ø–æ–º–æ—â—å—é –º–æ–∂–Ω–æ –ª–µ–≥–∫–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –ª–æ–∫–∞–ª—å–Ω—ã–π –¥–æ–º–µ–Ω –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ –∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω–æ–π —Å–µ—Ç–∏. –°–ª–µ–¥—É—è —ç—Ç–æ–π –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏, –≤—ã —Å–º–æ–∂–µ—Ç–µ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å —Å—Ç–∞–±–∏–ª—å–Ω—ã–π –∏ –Ω–∞–¥—ë–∂–Ω—ã–π DNS-—Å–µ—Ä–≤–µ—Ä. üöÄ

