---
–ê–≤—Ç–æ—Ä: –ö–æ–º–∞–Ω–¥–∞ simple-server.ru
---
# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ñ–∞–µ—Ä–≤–æ–ª–∞ –≤ Ubuntu —Å –ø–æ–º–æ—â—å—é —É—Ç–∏–ª–∏—Ç—ã UFW

## –í–≤–µ–¥–µ–Ω–∏–µ

**UFW (Uncomplicated Firewall)** ‚Äî —ç—Ç–æ —É–¥–æ–±–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ñ–∞–µ—Ä–≤–æ–ª–æ–º –≤ Ubuntu –∏ –¥—Ä—É–≥–∏—Ö –¥–∏—Å—Ç—Ä–∏–±—É—Ç–∏–≤–∞—Ö –Ω–∞ –±–∞–∑–µ Debian. –û–Ω —É–ø—Ä–æ—â–∞–µ—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫—É –ø—Ä–∞–≤–∏–ª –¥–æ—Å—Ç—É–ø–∞ –∏ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π, –¥–µ–ª–∞—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±—Ä–∞–Ω–¥–º–∞—É—ç—Ä–æ–º –±–æ–ª–µ–µ –∏–Ω—Ç—É–∏—Ç–∏–≤–Ω—ã–º.

–í –¥–∞–Ω–Ω–æ–π —Å—Ç–∞—Ç—å–µ —Ä–∞—Å—Å–º–æ—Ç—Ä–∏–º –ø—Ä–æ—Ü–µ—Å—Å —É—Å—Ç–∞–Ω–æ–≤–∫–∏, –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è UFW –≤ Ubuntu.

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞ UFW

–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é UFW –ø—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –≤ Ubuntu. –û–¥–Ω–∞–∫–æ, –µ—Å–ª–∏ –µ–≥–æ –Ω–µ—Ç –≤ —Å–∏—Å—Ç–µ–º–µ, —É—Å—Ç–∞–Ω–æ–≤–∏–º –µ–≥–æ –≤—Ä—É—á–Ω—É—é:

```bash
sudo apt update
sudo apt install ufw -y
```

–ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞—Ç—É—Å —Å–ª—É–∂–±—ã:

```bash
sudo ufw status
```

–ï—Å–ª–∏ –≤—ã–≤–æ–¥ –≥–ª–∞—Å–∏—Ç "Status: inactive", –∑–Ω–∞—á–∏—Ç, UFW –æ—Ç–∫–ª—é—á—ë–Ω.

## –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã UFW

### 1. –í–∫–ª—é—á–µ–Ω–∏–µ –∏ –æ—Ç–∫–ª—é—á–µ–Ω–∏–µ UFW

–î–ª—è –≤–∫–ª—é—á–µ–Ω–∏—è —Ñ–∞–µ—Ä–≤–æ–ª–∞ –∏—Å–ø–æ–ª—å–∑—É–µ–º –∫–æ–º–∞–Ω–¥—É:

```bash
sudo ufw enable
```

–î–ª—è –≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ –æ—Ç–∫–ª—é—á–µ–Ω–∏—è:

```bash
sudo ufw disable
```

### 2. –†–∞–∑—Ä–µ—à–µ–Ω–∏–µ –∏ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π

–†–∞–∑—Ä–µ—à–∏—Ç—å –≤—Ö–æ–¥—è—â–∏–π SSH-–¥–æ—Å—Ç—É–ø (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –ø–æ—Ä—Ç 22):

```bash
sudo ufw allow ssh
```

–†–∞–∑—Ä–µ—à–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–æ–º—É –ø–æ—Ä—Ç—É, –Ω–∞–ø—Ä–∏–º–µ—Ä, 80 (HTTP):

```bash
sudo ufw allow 80/tcp
```

–ó–∞–ø—Ä–µ—Ç–∏—Ç—å —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –∫ –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–æ–º—É –ø–æ—Ä—Ç—É, –Ω–∞–ø—Ä–∏–º–µ—Ä, 3306 (MySQL):

```bash
sudo ufw deny 3306
```

–†–∞–∑—Ä–µ—à–∏—Ç—å –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã–π IP-–∞–¥—Ä–µ—Å:

```bash
sudo ufw allow from 192.168.1.100
```

–ó–∞–ø—Ä–µ—Ç–∏—Ç—å –¥–æ—Å—Ç—É–ø —Å –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ IP-–∞–¥—Ä–µ—Å–∞:

```bash
sudo ufw deny from 203.0.113.15
```

### 3. –†–∞–±–æ—Ç–∞ —Å –¥–∏–∞–ø–∞–∑–æ–Ω–∞–º–∏ –ø–æ—Ä—Ç–æ–≤

–†–∞–∑—Ä–µ—à–∏—Ç—å –¥–∏–∞–ø–∞–∑–æ–Ω –ø–æ—Ä—Ç–æ–≤ (–Ω–∞–ø—Ä–∏–º–µ—Ä, 5000-6000 –¥–ª—è TCP):

```bash
sudo ufw allow 5000:6000/tcp
```

–ó–∞–ø—Ä–µ—Ç–∏—Ç—å –¥–∏–∞–ø–∞–∑–æ–Ω –ø–æ—Ä—Ç–æ–≤ (UDP):

```bash
sudo ufw deny 7000:8000/udp
```

### 4. –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–∞ –ø–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—É

–û–≥—Ä–∞–Ω–∏—á–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ SSH —Ç–æ–ª—å–∫–æ —Å –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–≥–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞:

```bash
sudo ufw allow in on eth1 to any port 22
```

–ó–∞–ø—Ä–µ—Ç–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ –≤–µ–±-—Å–µ—Ä–≤–µ—Ä—É –Ω–∞ –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–æ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ:

```bash
sudo ufw deny in on wlan0 to any port 80
```

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–æ—Ñ–∏–ª–µ–π UFW

–ù–µ–∫–æ—Ç–æ—Ä—ã–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —Å–æ–∑–¥–∞—é—Ç —Å–≤–æ–∏ –ø—Ä–æ—Ñ–∏–ª–∏ –¥–ª—è UFW. –ú–æ–∂–Ω–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Å–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –ø—Ä–æ—Ñ–∏–ª–µ–π –∫–æ–º–∞–Ω–¥–æ–π:

```bash
sudo ufw app list
```

–ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞:

```
Available applications:
  OpenSSH
  Apache
  Nginx Full
```

–†–∞–∑—Ä–µ—à–∏—Ç—å —Ç—Ä–∞—Ñ–∏–∫ –¥–ª—è Apache:

```bash
sudo ufw allow "Apache"
```

## –ü—Ä–æ—Å–º–æ—Ç—Ä –∏ —É–¥–∞–ª–µ–Ω–∏–µ –ø—Ä–∞–≤–∏–ª

–ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Å–ø–∏—Å–æ–∫ –∞–∫—Ç–∏–≤–Ω—ã—Ö –ø—Ä–∞–≤–∏–ª –º–æ–∂–Ω–æ —Å –ø–æ–º–æ—â—å—é –∫–æ–º–∞–Ω–¥—ã:

```bash
sudo ufw status numbered
```

–í—ã–≤–æ–¥ –ø—Ä–∏–º–µ—Ä–∞:

```
Status: active

     To                         Action      From
     --                         ------      ----
[ 1] 22                         ALLOW       Anywhere
[ 2] 80                         ALLOW       Anywhere
[ 3] 203.0.113.15               DENY        Anywhere
```

–£–¥–∞–ª–∏—Ç—å –ø—Ä–∞–≤–∏–ª–æ –ø–æ –Ω–æ–º–µ—Ä—É (–Ω–∞–ø—Ä–∏–º–µ—Ä, ‚Ññ3):

```bash
sudo ufw delete 3
```

## –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–µ–π—Å—Ç–≤–∏–π —Ñ–∞–µ—Ä–≤–æ–ª–∞

–í–∫–ª—é—á–µ–Ω–∏–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è:

```bash
sudo ufw logging on
```

–û—Ç–∫–ª—é—á–µ–Ω–∏–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è:

```bash
sudo ufw logging off
```

–õ–æ–≥–∏ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ —Ñ–∞–π–ª–µ `/var/log/ufw.log`.

## –ü–æ–ª–Ω—ã–π —Å–±—Ä–æ—Å –Ω–∞—Å—Ç—Ä–æ–µ–∫

–ï—Å–ª–∏ —Ç—Ä–µ–±—É–µ—Ç—Å—è —Å–±—Ä–æ—Å–∏—Ç—å –≤—Å–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Ñ–∞–µ—Ä–≤–æ–ª–∞, –∏—Å–ø–æ–ª—å–∑—É–µ–º –∫–æ–º–∞–Ω–¥—É:

```bash
sudo ufw reset
```

–ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è –∑–∞–Ω–æ–≤–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –ø—Ä–∞–≤–∏–ª–∞ –¥–æ—Å—Ç—É–ø–∞.

## –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

UFW ‚Äî –º–æ—â–Ω—ã–π –∏ —É–¥–æ–±–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –±—Ä–∞–Ω–¥–º–∞—É—ç—Ä–æ–º –≤ Ubuntu. –° –µ–≥–æ –ø–æ–º–æ—â—å—é –º–æ–∂–Ω–æ –±—ã—Å—Ç—Ä–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å —Å–µ—Ä–≤–µ—Ä–∞, —Ä–∞–∑—Ä–µ—à–∞—è –∏ –∑–∞–ø—Ä–µ—â–∞—è –¥–æ—Å—Ç—É–ø –∫ –Ω—É–∂–Ω—ã–º —Å–µ—Ä–≤–∏—Å–∞–º –∏ –ø–æ—Ä—Ç–∞–º. –°–ª–µ–¥—É—è —ç—Ç–æ–π –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏, –≤—ã —Å–º–æ–∂–µ—Ç–µ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ —É–ø—Ä–∞–≤–ª—è—Ç—å —Å–µ—Ç–µ–≤—ã–º–∏ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è–º–∏ –∏ –∑–∞—â–∏—Ç–∏—Ç—å —Å–≤–æ–π —Å–µ—Ä–≤–µ—Ä. üöÄ

